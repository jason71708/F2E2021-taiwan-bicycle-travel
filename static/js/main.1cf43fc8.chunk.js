(this["webpackJsonpf2e2021-taiwan-bicycle-travel"]=this["webpackJsonpf2e2021-taiwan-bicycle-travel"]||[]).push([[0],{88:function(n,t,e){"use strict";e.r(t);var i,o,r,a,c,s,l,d,p,u,b,f,h,x=e(0),j=e.n(x),m=e(21),g=e.n(m),O=e(3),y=e(4),v=e(47),k={xs:0,sm:360,md:768,lg:1280,xl:1440},w=Object(v.a)(k),S=e(28),C=e(10),z=y.d.section(i||(i=Object(O.a)(["\n  position: relative;\n  width: 100vw;\n  background-color: ",";\n  text-align: center;\n"])),(function(n){return n.theme.colors.primary[400]})),B=y.d.div(o||(o=Object(O.a)(["\n  display: inline-flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: ",";\n  padding: 10px 20px;\n\n  ","\n"])),(function(n){return n.theme.layout.headerHeight.default}),w("md")(r||(r=Object(O.a)(["\n    padding: 20px 72px;\n    height: ",";\n  "])),(function(n){return n.theme.layout.headerHeight.md}))),N=y.d.img(a||(a=Object(O.a)(["\n  width: 105px;\n\n  ","\n"])),w("md")(c||(c=Object(O.a)(["\n    width: 210px;\n  "])))),A=y.d.button(s||(s=Object(O.a)(["\n  color: ",";\n  cursor: pointer;\n"])),(function(n){return n.theme.colors.grey[100]})),P=y.d.nav(l||(l=Object(O.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  padding: 8px 0;\n  color: ",";\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 403;\n\n  ","\n\n  & a {\n    text-decoration: none;\n    flex: 1 0 auto;\n\n    &:nth-child(1n+2) {\n      border-left: 1px solid ",";\n\n      ","\n    }\n  }\n\n"])),(function(n){return n.theme.colors.primary[100]}),(function(n){return n.theme.colors.primary[400]}),w("md")(d||(d=Object(O.a)(["\n    position: static;\n    width: auto;\n    background-color: transparent;\n  "]))),(function(n){return n.theme.colors.primary[400]}),w("md")(p||(p=Object(O.a)(["\n        border-left: none;\n      "])))),F=y.d.span(u||(u=Object(O.a)(["\n  text-align: center;\n  padding: 4px 0;\n  font-weight: 700;\n  font-size: 12px;\n  transition: background-color 0.2s linear;\n\n  ","\n\n  & i {\n    display: block;\n\n    ","\n  }\n"])),w("md")(b||(b=Object(O.a)(["\n    display: inline-block;\n    background-color: ",";\n    border-radius: 8px;\n    box-shadow: 0 0 0 ","px ",";\n    padding: 8px 16px;\n    margin-left: 16px;\n    font-size: 16px;\n\n    &:hover {\n      box-shadow: 0 0 0 3px ",";\n    }\n  "])),(function(n){return n.match?n.theme.colors.primary[100]:n.theme.colors.grey[100]}),(function(n){return n.match?"3":"1"}),(function(n){return n.theme.colors.primary[300]}),(function(n){return n.theme.colors.primary[300]})),w("md")(f||(f=Object(O.a)(["\n      display: inline-block;\n      margin-right: 4px;\n    "])))),D=e(8);!function(n){n.Bicycle="/bicycle",n.Routes="/routes",n.Scenics="/scenics"}(h||(h={}));var E=e(1),L=function(){var n=Object(D.f)();return Object(E.jsx)(P,{children:Object(E.jsx)(S.b,{to:h.Bicycle,children:Object(E.jsxs)(F,{match:n.pathname===h.Bicycle,children:[Object(E.jsx)("i",{className:"fas fa-bicycle"}),"\u627e\u55ae\u8eca"]})})})},R=e(51);var T,$,M,I,H,Z,_,U,J,X=function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(R.useMediaQuery)({query:"(".concat(t?"min-width":"max-width",": ").concat(k[n],"px)")})},q=function(){var n=X("md"),t=Object(x.useState)(!1),e=Object(C.a)(t,2),i=e[0],o=e[1];return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(z,{children:[Object(E.jsxs)(B,{children:[Object(E.jsx)(N,{src:"./logo.png",alt:"logo"}),n?Object(E.jsx)(L,{}):Object(E.jsx)(A,{onClick:function(){return o(!i)},children:Object(E.jsx)("i",{className:"fas fa-bars"})})]}),i&&!n&&Object(E.jsx)(L,{})]})})},K=e(95),Q=e(96),W=e(12),G=e(19),V=Object(G.b)({name:"station",initialState:{pedding:!1,data:[],error:null},reducers:{request:function(n,t){n.pedding=!0},success:function(n,t){n.pedding=!1,n.data=t.payload.data,n.error=null},failure:function(n,t){n.pedding=!1,n.error=t.payload.error}}}),Y=V.actions,nn=Y.request,tn=Y.success,en=Y.failure,on=V.reducer,rn=e(91);!function(n){n.Limited="Limited",n.Disabled="Disabled",n.Default="Default"}(T||(T={})),function(n){n.Bike="Bike",n.Parking="Parking"}($||($={})),function(n){n[n["\u505c\u6b62\u71df\u904b"]=0]="\u505c\u6b62\u71df\u904b",n[n["\u6b63\u5e38\u71df\u904b"]=1]="\u6b63\u5e38\u71df\u904b",n[n["\u66ab\u505c\u71df\u904b"]=2]="\u66ab\u505c\u71df\u904b"}(M||(M={})),function(n){n.NoResult="NoResult",n.PageNotFound="PageNotFound",n.Error="Error"}(I||(I={}));var an,cn,sn,ln,dn,pn,un,bn,fn,hn,xn,jn,mn,gn,On,yn,vn,kn,wn,Sn,Cn,zn,Bn,Nn,An,Pn,Fn,Dn=Object(y.c)(H||(H=Object(O.a)(["\n  box-shadow: 4px 4px 20px 0 ","30;\n"])),(function(n){return n.theme.colors.grey[500]})),En=Object(y.c)(Z||(Z=Object(O.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n  display: -webkit-box;\n  -webkit-line-clamp: ",";\n  -webkit-box-orient: vertical;\n"])),(function(n){return n.lineLimit})),Ln=Object(y.e)(_||(_=Object(O.a)(["\nfrom {\n  transform: rotate(0deg);\n}\n\nto {\n  transform: rotate(360deg);\n}\n"]))),Rn=Object(y.c)(U||(U=Object(O.a)(["\n  animation: "," 2s linear infinite;\n"])),Ln),Tn=Object(y.c)(J||(J=Object(O.a)(["\n  color: ",";\n  background-color: ",";\n"])),(function(n){return n.status===T.Default?n.theme.colors.primary[500]:n.status===T.Limited?n.theme.colors.alert[600]:n.theme.colors.grey[400]}),(function(n){return n.status===T.Default?n.theme.colors.primary[100]:n.status===T.Limited?n.theme.colors.alert[100]:n.theme.colors.grey[200]})),$n=y.d.section(an||(an=Object(O.a)(["\n  position: absolute;\n  bottom: ",";\n  left: 0;\n  width: 100vw;\n  height: 300px;\n  padding: 16px;\n  z-index: 402; // In order to biger than Map's z-index\n  background-color: ",";\n  border-radius: 8px;\n  cursor: initial;\n  /* overflow: hidden; */\n  ","\n  transition: bottom 0.3s linear;\n\n  ","\n"])),(function(n){return n.isUnfold?"0px":"-200px"}),(function(n){return n.theme.colors.grey[100]}),Dn,w("md")(cn||(cn=Object(O.a)(["\n    top: 36px;\n    left: 36px;\n    width: 430px;\n    height: calc(100% - 72px);\n    padding: 28px;\n  "])))),Mn=y.d.button(sn||(sn=Object(O.a)(["\n  position: absolute;\n  bottom: 100%;\n  background-color: ",";\n  width: 60px;\n  height: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  border-radius: 6px 6px 0 0;\n  z-index: 402;\n  font-size: 14px;\n\n  ","\n"])),(function(n){return n.theme.colors.grey[100]}),w("md")(ln||(ln=Object(O.a)(["\n    display: none;\n  "])))),In=y.d.div(dn||(dn=Object(O.a)(["\n  margin-bottom: 16px;\n  display: flex;\n  align-items: center;\n\n  ","\n"])),w("md")(pn||(pn=Object(O.a)(["\n    margin-bottom: 28px;\n  "])))),Hn=y.d.ul(un||(un=Object(O.a)(["\n  width: 100%;\n  height: calc(100% - 36px - 28px);\n  overflow: auto;\n  padding-right: 12px;\n"]))),Zn=y.d.div(bn||(bn=Object(O.a)(["\n  position: relative;\n  padding: 8px 48px 8px 20px;\n  margin-left: 12px;\n  flex: 1 0 auto;\n  background-color: ",";\n  color: ",";\n  border-radius: 8px;\n  font-weight: bold;\n  font-size: 14px;\n"])),(function(n){return n.theme.colors.grey[200]}),(function(n){return n.theme.colors.grey[600]})),_n=y.d.input(fn||(fn=Object(O.a)(["\n  width: 100%;\n  height: 100%;\n"]))),Un=y.d.button(hn||(hn=Object(O.a)(["\n  position: absolute;\n  right: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 20px;\n  color: ",";\n"])),(function(n){return n.theme.colors.grey[600]})),Jn=y.d.select(xn||(xn=Object(O.a)(["\n  width: 100px;\n  padding: 8px 12px;\n  font-size: 15px;\n  line-height: 20px;\n  color: ",";\n  border: 2px solid ",";\n  border-radius: 8px;\n"])),(function(n){return n.theme.colors.primary[600]}),(function(n){return n.theme.colors.primary[400]})),Xn=[{CityName:"\u81fa\u5317\u5e02",City:"Taipei"},{CityName:"\u65b0\u5317\u5e02",City:"NewTaipei"},{CityName:"\u6843\u5712\u5e02",City:"Taoyuan"},{CityName:"\u81fa\u4e2d\u5e02",City:"Taichung"},{CityName:"\u81fa\u5357\u5e02",City:"Tainan"},{CityName:"\u9ad8\u96c4\u5e02",City:"Kaohsiung"},{CityName:"\u65b0\u7af9\u5e02",City:"Hsinchu"},{CityName:"\u82d7\u6817\u7e23",City:"MiaoliCounty"},{CityName:"\u5609\u7fa9\u5e02",City:"Chiayi"},{CityName:"\u5c4f\u6771\u7e23",City:"PingtungCounty"},{CityName:"\u91d1\u9580\u7e23",City:"KinmenCounty"}],qn={type:$.Bike},Kn=Object(G.b)({name:"displayType",initialState:qn,reducers:{update:function(n,t){n.type=t.payload.type}}}),Qn=Kn.actions.update,Wn=Kn.reducer,Gn=y.d.li(jn||(jn=Object(O.a)(["\n  display: block;\n  padding-bottom: 10px;\n  border-bottom: 1px solid ",";\n\n  &:nth-child(n+2) {\n    padding-top: 10px;\n\n    @media screen and (min-width: ","px) {\n      padding-top: 20px;\n    }\n  }\n\n  ","\n"])),(function(n){return n.theme.colors.grey[300]}),k.md,w("md")(mn||(mn=Object(O.a)(["\n    padding-bottom: 20px;\n  "])))),Vn=y.d.h1(gn||(gn=Object(O.a)(["\n  ","\n  font-size: 22px;\n  line-height: 26px;\n  font-weight: 700;\n  color: ",";\n"])),En,(function(n){return n.theme.colors.primary[500]})),Yn=y.d.div(On||(On=Object(O.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 12px;\n"]))),nt=y.d.button(yn||(yn=Object(O.a)(["\n  ","\n  flex: 1 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  text-align: center;\n  padding: 4px 20px;\n  border-radius: 8px;\n\n  &:nth-child(n+2) {\n    margin-left: 20px;\n  }\n\n  ","\n"])),Tn,w("md")(vn||(vn=Object(O.a)(["\n    display: block;\n    padding: 8px 0;\n  "])))),tt=y.d.span(kn||(kn=Object(O.a)(["\n  display: inline-block;\n  font-size: 15px;\n  line-height: 20px;\n  font-weight: 500;\n\n  & i {\n    margin-right: 4px;\n  }\n\n  ","\n"])),w("md")(wn||(wn=Object(O.a)(["\n    display: block;\n  "])))),et=y.d.span(Sn||(Sn=Object(O.a)(["\n  display: inline-block;\n  font-size: 20px;\n  line-height: 32px;\n  font-weight: 700;\n\n  ","\n"])),w("md")(Cn||(Cn=Object(O.a)(["\n    display: block;\n    font-size: 26px;\n    margin-top: 4px;\n  "])))),it=y.d.span(zn||(zn=Object(O.a)(["\n  font-size: 15px;\n  font-weight: 500;\n  line-height: 20px;\n  border-radius: 6px;\n  color: ",";\n\n  & i {\n    margin-right: 6px;\n  }\n"])),(function(n){return n.theme.colors.grey[500]})),ot=Object(y.d)(it)(Bn||(Bn=Object(O.a)(["\n  padding: 6px 12px;\n  border: 1px solid ",";\n"])),(function(n){return n.theme.colors.grey[500]})),rt=function(n,t){return 1!==n?T.Disabled:t>5?T.Default:t>0?T.Limited:T.Disabled},at=function(n){var t=n.station,e=n.badgeClick;return Object(E.jsxs)(Gn,{children:[Object(E.jsx)(Vn,{lineLimit:1,children:t.StationName.Zh_tw.split("_")[1]}),Object(E.jsxs)(Yn,{children:[Object(E.jsxs)(nt,{"data-type":"rent",status:rt(t.ServiceStatus,t.AvailableRentBikes),onClick:function(){return e($.Bike,t)},children:[Object(E.jsxs)(tt,{children:[Object(E.jsx)("i",{className:"fas fa-bicycle"}),"\u53ef\u79df\u501f"]}),Object(E.jsx)(et,{children:t.AvailableRentBikes})]}),Object(E.jsxs)(nt,{"data-type":"return",status:rt(t.ServiceStatus,t.AvailableReturnBikes),onClick:function(){return e($.Parking,t)},children:[Object(E.jsxs)(tt,{children:[Object(E.jsx)("i",{className:"fas fa-parking"}),"\u53ef\u505c\u8eca"]}),Object(E.jsx)(et,{children:t.AvailableReturnBikes})]})]}),Object(E.jsxs)(Yn,{children:[Object(E.jsx)(ot,{children:t.StationName.Zh_tw.split("_")[0]}),Object(E.jsxs)(it,{children:[Object(E.jsx)("i",{className:"fas fa-lightbulb"}),M[t.ServiceStatus]]})]})]})},ct=y.d.div(Nn||(Nn=Object(O.a)(["\n  width: 100%;\n  padding: 40px 0;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  color: ",";\n"])),(function(n){return n.theme.colors.grey[400]})),st=y.d.p(An||(An=Object(O.a)(["\n  font-size: 18px;\n  margin: 0 0 0 8px;\n  text-align: center;\n  padding: 0 40px;\n\n  ","\n"])),w("md")(Pn||(Pn=Object(O.a)(["\n    text-align: start;\n    padding: 0;\n  "])))),lt=y.d.div(Fn||(Fn=Object(O.a)(["\n  font-size: 32px;\n"])));var dt,pt,ut=function(n){var t=n.problem;return Object(E.jsxs)(ct,{children:[Object(E.jsx)(lt,{children:Object(E.jsx)("i",{className:"fas fa-exclamation-circle"})}),Object(E.jsx)("div",{children:Object(E.jsxs)(st,{children:[t===I.NoResult&&"\u7121\u641c\u5c0b\u76f8\u95dc\u7684\u5167\u5bb9",t===I.PageNotFound&&"\u627e\u4e0d\u5230\u8a72\u9801\u9762",t===I.Error&&"\u4f3a\u670d\u5668\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"]})})]})},bt=y.d.div(dt||(dt=Object(O.a)(["\n  width: 100%;\n  padding: 40px 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ",";\n"])),(function(n){return n.theme.colors.primary[400]})),ft=y.d.div(pt||(pt=Object(O.a)(["\n  font-size: 32px;\n  ","\n"])),Rn);var ht,xt,jt,mt,gt,Ot,yt,vt,kt,wt,St,Ct,zt,Bt,Nt,At,Pt,Ft=function(){return Object(E.jsx)(bt,{children:Object(E.jsx)(ft,{children:Object(E.jsx)("i",{className:"fas fa-spinner"})})})},Dt=function(n){var t=n.openSearchList,e=n.unfoldButtonClick,i=Object(rn.a)(),o=Object(W.b)(),r=Object(W.c)((function(n){return n.displayType})).type,a=Object(W.c)((function(n){return n.station})),c=a.pedding,s=a.data,l=a.error,d=Object(x.useState)(""),p=Object(C.a)(d,2),u=p[0],b=p[1],f=Object(x.useState)(Xn[0].City),h=Object(C.a)(f,2),j=h[0],m=h[1],g=function(n,t){r!==n&&o(Qn({type:n})),i.flyTo([t.StationPosition.PositionLat,t.StationPosition.PositionLon],18,{animate:!1})};return Object(E.jsxs)($n,{isUnfold:t,children:[Object(E.jsx)(Mn,{onClick:function(){return e(!t)},children:t?Object(E.jsx)("i",{className:"fas fa-angle-down"}):Object(E.jsx)("i",{className:"fas fa-angle-up"})}),Object(E.jsxs)(In,{children:[Object(E.jsx)(Jn,{onChange:function(n){return m(n.target.value)},children:Xn.map((function(n){return Object(E.jsx)("option",{value:n.City,children:n.CityName},n.City)}))}),Object(E.jsxs)(Zn,{children:[Object(E.jsx)(_n,{type:"text",value:u,placeholder:"\u641c\u5c0b\u7ad9\u9ede",onChange:function(n){return b(n.target.value)},onKeyPress:function(n){"Enter"===n.key&&function(n,t){o(nn({keyword:n,city:t}))}(u,j)}}),Object(E.jsx)(Un,{children:Object(E.jsx)("i",{className:"fas fa-search"})})]})]}),Object(E.jsxs)(Hn,{children:[c&&Object(E.jsx)(Ft,{}),l&&Object(E.jsx)(ut,{problem:I.Error}),!c&&!l&&(s.length>0?s.map((function(n){return Object(E.jsx)(at,{station:n,badgeClick:g},n.StationID)})):Object(E.jsx)(ut,{problem:I.NoResult}))]})]})},Et=e(52),Lt=y.d.button(ht||(ht=Object(O.a)(["\n  position: absolute;\n  right: 28px;\n  bottom: ",";\n  width: 40px;\n  height: 40px;\n  border-radius: 100%;\n  background-color: ",";\n  color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 402; // In order to biger than Map's z-index\n  font-size: 20px;\n  ","\n  ","\n  transition: bottom 0.3s linear;\n\n  &:hover {\n    border: 3px solid ",";\n  }\n\n  ","\n"])),(function(n){return n.openSearchList?"calc(300px + 12px)":"calc(100px + 12px)"}),(function(n){return n.active?n.theme.colors.primary[400]:n.theme.colors.grey[300]}),(function(n){return n.theme.colors.grey[100]}),Dn,(function(n){return n.locating?Rn:""}),(function(n){return n.theme.colors.primary[500]}),w("md")(xt||(xt=Object(O.a)(["\n    top: 36px;\n    bottom: auto;\n    right: calc(50% - 30px);\n    font-size: 30px;\n    width: 60px;\n    height: 60px;\n  "])))),Rt=Object(G.b)({name:"geolocation",initialState:{position:null,center:[23.703875,120.982024]},reducers:{update:function(n,t){void 0!==t.payload.position&&(n.position=t.payload.position),void 0!==t.payload.center&&(n.center=t.payload.center)},reset:function(n){n.position=null}}}),Tt=Rt.actions,$t=Tt.update,Mt=(Tt.reset,Rt.reducer),It=function(n){var t=n.openSearchList,e=Object(x.useState)(null),i=Object(C.a)(e,2),o=(i[0],i[1]),r=Object(x.useState)(!1),a=Object(C.a)(r,2),c=a[0],s=a[1],l=Object(W.b)(),d=Object(W.c)((function(n){return n.geolocation.position})),p=function(){s(!0);var n=navigator.geolocation.watchPosition((function(n){l($t({position:[n.coords.latitude,n.coords.longitude]})),s(!1)}),(function(n){alert("Unable to retrieve your location"),s(!1)}));o(n)};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Lt,{openSearchList:t,"data-tip":!0,"data-for":"postitionButton",active:!!d,locating:c,onClick:function(){"geolocation"in navigator?d?l(nn({position:d})):p():alert("Geolocation is not supported by your browser")},children:Object(E.jsx)("i",{className:"fas fa-crosshairs"})}),Object(E.jsx)(Et.a,{id:"postitionButton",place:"right",type:"dark",effect:"solid",children:"\u641c\u5c0b\u9644\u8fd1"})]})},Ht=y.d.div(jt||(jt=Object(O.a)(["\n  position: absolute;\n  padding: 4px 6px;\n  top: 20px;\n  right: calc(50% - 100px);\n  width: 200px;\n  height: 36px;\n  cursor: pointer;\n  z-index: 402; // In order to biger than Map's z-index\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n  border-radius: 999px;\n\n  ","\n"])),Dn,(function(n){return n.theme.colors.grey[100]}),w("md")(mt||(mt=Object(O.a)(["\n    width: 280px;\n    height: 60px;\n    padding: 8px 12px;\n    top: calc(36px + 60px + 12px);\n    right: calc(50% - 140px);\n  "])))),Zt=y.d.button(gt||(gt=Object(O.a)(["\n  flex: 1 0 auto;\n  width: 50%;\n  height: 100%;\n  border-radius: 999px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ",";\n  background-color: ",";\n  font-size: 14px;\n\n  & i {\n    margin-right: 8px;\n  }\n\n  ","\n"])),(function(n){return n.active?n.theme.colors.grey[100]:n.theme.colors.primary[400]}),(function(n){return n.active?n.theme.colors.primary[400]:n.theme.colors.grey[100]}),w("md")(Ot||(Ot=Object(O.a)(["\n    font-size: 18px;\n  "])))),_t=function(){var n=Object(W.b)(),t=Object(W.c)((function(n){return n.displayType})).type,e=function(e){t!==e&&n(Qn({type:e}))};return Object(E.jsxs)(Ht,{children:[Object(E.jsxs)(Zt,{active:t===$.Bike,onClick:function(){return e($.Bike)},children:[Object(E.jsx)("i",{className:"fas fa-bicycle"}),"\u627e\u55ae\u8eca"]}),Object(E.jsxs)(Zt,{active:t===$.Parking,onClick:function(){return e($.Parking)},children:[Object(E.jsx)("i",{className:"fas fa-parking"}),"\u627e\u8eca\u4f4d"]})]})},Ut=e(11),Jt=e.n(Ut),Xt=function(){var n=Object(x.useRef)(null),t=Object(x.useState)(!1),e=Object(C.a)(t,2),i=e[0],o=e[1],r=Object(x.useCallback)((function(){n.current?(Jt.a.DomEvent.disableClickPropagation(n.current),Jt.a.DomEvent.disableScrollPropagation(n.current)):setTimeout((function(){r()}),100)}),[]);return Object(x.useEffect)((function(){r()}),[r]),Object(E.jsxs)("div",{ref:n,children:[Object(E.jsx)(Dt,{openSearchList:i,unfoldButtonClick:o}),Object(E.jsx)(_t,{}),Object(E.jsx)(It,{openSearchList:i})]})},qt=e(92),Kt=e(93),Qt=y.d.div(yt||(yt=Object(O.a)(["\n  color: ",";\n  padding: 4px 12px;\n  font-size: 14px;\n"])),(function(n){return n.theme.colors.grey[100]})),Wt=e.p+"static/media/dribbble-unscreen.04671d5f.gif",Gt=new Jt.a.icon({iconUrl:Wt,iconSize:[120,90],iconAnchor:[60,45],popupAnchor:[1,-90]}),Vt=function(n){var t=n.position;return Object(E.jsx)(qt.a,{"data-tip":!0,"data-for":"postitionMarker",icon:Gt,position:t,children:Object(E.jsx)(Kt.a,{offset:[20,0],children:Object(E.jsx)(Qt,{children:"\u73fe\u5728\u4f4d\u7f6e"})})})},Yt={layout:{headerHeight:{default:"36px",md:"75px"}},typography:{h1:"45px",h2:"36px",h3:"32px",h4:"36px",h5:"22px",content:"18px",button:"15px",caption:"12px"},colors:{primary:{100:"#DFE4CE",200:"#CBD3B0",300:"#A4B375",400:"#738047",500:"#474F2C",600:"#292E19"},accent:{100:"#FAF0E5",200:"#F5DFC6",300:"#EABD8A",400:"#DE994A",500:"#C67A24",600:"#A3651E"},alert:{100:"#F7D4DD",200:"#F1B2C1",300:"#F27594",400:"#E75578",500:"#BC3253",600:"#8C3046"},grey:{100:"#FFFFFF",200:"#EEEEEE",300:"#C5C5C5",400:"#9A9A9A",500:"#767676",600:"#464646",700:"#222222"}}},ne=e(35),te=y.d.text(vt||(vt=Object(O.a)(["\n  fill: ",";\n  font-size:24px;\n  font-weight: bold;\n  transform: ",";\n"])),(function(n){return n.color}),(function(n){return n.isOverTen?"translateX(-14px)":"translateX(-7px)"})),ee=function(n){var t=n.status,e=n.quantity,i=Object(x.useMemo)((function(){return t===T.Default?Yt.colors.primary[400]:t===T.Limited?Yt.colors.alert[400]:Yt.colors.grey[400]}),[t]),o=Object(x.useMemo)((function(){return t===T.Default?Object(ne.a)(.2,Yt.colors.primary[400]):t===T.Limited?Object(ne.a)(.2,Yt.colors.alert[400]):Object(ne.a)(.2,Yt.colors.grey[400])}),[t]);return Object(E.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 58 77",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(E.jsx)("ellipse",{cx:"29",cy:"72.5",rx:"15",ry:"4.5",fill:o}),Object(E.jsx)("path",{d:"M28.8003 0C12.9207 0 0.000293201 12.9204 0.000293201 28.782C-0.104107 51.984 27.7059 71.2224 28.8003 72C28.8003 72 57.7047 51.984 57.6003 28.8C57.6003 12.9204 44.6799 0 28.8003 0ZM28.8003 43.2C20.8443 43.2 14.4003 36.756 14.4003 28.8C14.4003 20.844 20.8443 14.4 28.8003 14.4C36.7563 14.4 43.2003 20.844 43.2003 28.8C43.2003 36.756 36.7563 43.2 28.8003 43.2Z",fill:i}),Object(E.jsx)("circle",{cx:"29",cy:"29",r:"19",fill:"#fff"}),Object(E.jsx)(te,{x:"50%",y:"47%",color:i,isOverTen:e>=10,children:e})]})},ie=e(53),oe=e.n(ie),re=e(94),ae=y.d.h1(kt||(kt=Object(O.a)(["\n  font-weight: 700;\n  font-size: 15px;\n  line-height: 1.3;\n  color: ",";\n\n  ","\n"])),(function(n){return n.theme.colors.primary[500]}),w("md")(wt||(wt=Object(O.a)(["\n    font-size: 18px;\n    line-height: 1.5;\n  "])))),ce=y.d.div(St||(St=Object(O.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  &:nth-child(n+2) {\n    margin-top: 8px;\n  }\n"]))),se=y.d.span(Ct||(Ct=Object(O.a)(["\n  color: ",";\n  font-size: 15px;\n  font-weight: 500;\n  line-height: 20px;\n\n  & i {\n    margin-right: 6px;\n  }\n"])),(function(n){return n.theme.colors.grey[500]})),le=y.d.div(zt||(zt=Object(O.a)(["\n  display: flex;\n  align-items: center;\n"]))),de=y.d.span(Bt||(Bt=Object(O.a)(["\n  ","\n  font-size: 15px;\n  font-weight: 700;\n  line-height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: auto;\n  height: auto;\n  padding: 1px 6px;\n  border-radius: 4px;\n\n  & i {\n    margin-right: 8px;\n  }\n\n  &:nth-child(n+2) {\n    margin-left: 12px;\n  }\n\n  ","\n"])),Tn,w("md")(Nt||(Nt=Object(O.a)(["\n    width: 70px;\n    height: 30px;\n    padding: 0 12px;\n  "])))),pe=function(n){var t=n.station,e=X("md");return Object(E.jsxs)(re.a,{closeButton:!1,minWidth:e?350:270,maxHeight:e?100:75,children:[Object(E.jsxs)(ce,{children:[Object(E.jsx)(ae,{children:t.StationName.Zh_tw.split("_")[1]}),Object(E.jsx)(se,{children:t.StationName.Zh_tw.split("_")[0]})]}),Object(E.jsxs)(ce,{children:[Object(E.jsxs)(le,{children:[Object(E.jsxs)(de,{status:rt(t.ServiceStatus,t.AvailableRentBikes),children:[Object(E.jsx)("i",{className:"fas fa-bicycle"}),t.AvailableRentBikes]}),Object(E.jsxs)(de,{status:rt(t.ServiceStatus,t.AvailableReturnBikes),children:[Object(E.jsx)("i",{className:"fas fa-parking"}),t.AvailableReturnBikes]})]}),Object(E.jsxs)(se,{children:[Object(E.jsx)("i",{className:"fas fa-lightbulb"}),M[t.ServiceStatus]]})]})]})},ue=function(n,t,e){return Jt.a.divIcon({iconSize:[45,60],iconAnchor:[22.5,30],popupAnchor:e?[175,140]:[0,-25],html:oe.a.renderToString(Object(E.jsx)(ee,{status:n,quantity:t}))})},be={PositionMarker:Vt,StationMarker:function(n){var t=n.station,e=n.type,i=Object(rn.a)(),o=X("md"),r=Object(x.useMemo)((function(){return 1!==t.ServiceStatus?ue(T.Disabled,0,o):ue(rt(t.ServiceStatus,e===$.Bike?t.AvailableRentBikes:t.AvailableReturnBikes),e===$.Bike?t.AvailableRentBikes:t.AvailableReturnBikes,o)}),[t.AvailableRentBikes,t.AvailableReturnBikes,t.ServiceStatus,e,o]);return Object(E.jsx)(qt.a,{icon:r,position:[t.StationPosition.PositionLat,t.StationPosition.PositionLon],eventHandlers:{click:function(){i.flyTo([t.StationPosition.PositionLat,t.StationPosition.PositionLon],18)}},children:Object(E.jsx)(pe,{station:t})})}},fe=function(){var n=Object(W.b)(),t=Object(x.useRef)(null),e=Object(x.useState)(null),i=Object(C.a)(e,2),o=i[0],r=i[1],a=Object(W.c)((function(n){return n.station})).data,c=Object(W.c)((function(n){return n.geolocation})),s=c.position,l=c.center,d=Object(W.c)((function(n){return n.displayType})).type;return Object(x.useEffect)((function(){a.length>0&&o&&o.flyTo(l,16,{animate:!1})}),[a,l,o]),Object(x.useEffect)((function(){null===t.current&&s&&n(nn({position:s})),t.current=s}),[s,n]),Object(E.jsxs)(K.a,{style:{height:"100%",width:"100%"},center:l,zoom:8,whenCreated:r,scrollWheelZoom:!0,zoomControl:!1,children:[Object(E.jsxs)(D.d,{children:[Object(E.jsx)(D.b,{path:"/",element:Object(E.jsx)(D.a,{to:h.Bicycle,replace:!0})}),Object(E.jsx)(D.b,{path:h.Bicycle,element:Object(E.jsx)(Xt,{})}),Object(E.jsx)(D.b,{path:h.Routes,element:Object(E.jsx)("div",{children:"Routes"})})]}),Object(E.jsx)(Q.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"}),s&&Object(E.jsx)(be.PositionMarker,{position:s}),a.map((function(n){return Object(E.jsx)(be.StationMarker,{type:d,station:n},n.StationID)}))]})},he=y.d.div(At||(At=Object(O.a)(["\n  position: relative;\n  width: 100vw;\n  height: calc(100vh - ",");\n\n  ","\n"])),(function(n){return n.theme.layout.headerHeight.default}),w("md")(Pt||(Pt=Object(O.a)(["\n    height: calc(100vh - ",");\n  "])),(function(n){return n.theme.layout.headerHeight.md}))),xe=function(){return Object(E.jsxs)(S.a,{basename:"/F2E2021-taiwan-bicycle-travel",children:[Object(E.jsx)(q,{}),Object(E.jsx)(he,{children:Object(E.jsx)(fe,{})})]})},je=e(57),me=e(13),ge=Object(me.b)({station:on,geolocation:Mt,displayType:Wn}),Oe=e(20),ye=e.n(Oe),ve=e(17),ke=e(54),we=e.n(ke),Se=e(56),Ce=function(){var n=(new Date).toUTCString(),t=new Se.a("SHA-1","TEXT");t.setHMACKey("xtZ8aAkFV7CUlPr9QObyvFlEQxc","TEXT"),t.update("x-date: "+n);var e=t.getHMAC("B64");return{Authorization:'\n    hmac username="'.concat("161bd8271c0e417a9ee2eb466ec2b53f",'", algorithm="hmac-sha1", headers="x-date", signature="').concat(e,'"\n  '),"X-Date":n}},ze=we.a.create({baseURL:"https://ptx.transportdata.tw/MOTC"}),Be=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=n.map((function(n){return n+" ne null"})).join(" and "),i=t.map((function(n){return"(".concat(n.searchFields.map((function(t){return"contains(".concat(t,", '").concat(n.keyword,"')")})).join(" or "),")")})).join(" and ");return[e,i].filter((function(n){return n})).join(" and ")},Ne=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return"nearby(".concat(n[0],",").concat(n[1],",").concat(t,")")},Ae=["StationID","StationName/Zh_tw","StationPosition/PositionLon","StationPosition/PositionLat"],Pe=["StationName/Zh_tw","StationAddress/Zh_tw"],Fe=function(n){var t=n.$format,e=void 0===t?"JSON":t,i=n.$filter,o=n.city;return ze.get("/v2/Bike/Station/".concat(o),{headers:Ce(),params:{$format:e,$filter:i}})},De=function(n){var t=n.$format,e=void 0===t?"JSON":t,i=n.$spatialFilter,o=n.$filter;return ze.get("/v2/Bike/Station/NearBy",{headers:Ce(),params:{$format:e,$spatialFilter:i,$filter:o}})},Ee=["StationID","ServiceStatus","AvailableRentBikes","AvailableReturnBikes"],Le=function(n){var t=n.$format,e=void 0===t?"JSON":t,i=n.$filter,o=n.city;return ze.get("/v2/Bike/Availability/".concat(o),{headers:Ce(),params:{$format:e,$filter:i}})},Re=function(n){var t=n.$format,e=void 0===t?"JSON":t,i=n.$spatialFilter;return ze.get("/v2/Bike/Availability/NearBy",{headers:Ce(),params:{$format:e,$spatialFilter:i}})},Te=ye.a.mark(Me),$e=ye.a.mark(Ie);function Me(n){var t,e,i,o,r,a;return ye.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=n.payload,c.prev=1,!("position"in t)){c.next=11;break}return c.next=5,Object(ve.b)(De,{$filter:Be(Ae),$spatialFilter:Ne(t.position)});case 5:return e=c.sent,c.next=8,Object(ve.b)(Re,{$filter:Be(Ee),$spatialFilter:Ne(t.position)});case 8:i=c.sent,c.next=18;break;case 11:return o=t.keyword,r=t.city,c.next=14,Object(ve.b)(Fe,{$filter:Be(Ae,[{keyword:o,searchFields:Pe}]),city:r});case 14:return e=c.sent,c.next=17,Object(ve.b)(Le,{$filter:Be(Ee),city:r});case 17:i=c.sent;case 18:return a=e.data.reduce((function(n,t){var e=i.data.findIndex((function(n){return n.StationID===t.StationID}));return e>-1&&n.push(Object.assign(t,i.data[e])),n}),[]),c.next=21,Object(ve.d)(tn({data:a}));case 21:if(!("position"in t)){c.next=26;break}return c.next=24,Object(ve.d)($t({center:t.position}));case 24:c.next=29;break;case 26:if(!(a.length>0)){c.next=29;break}return c.next=29,Object(ve.d)($t({center:[a[0].StationPosition.PositionLat,a[0].StationPosition.PositionLon]}));case 29:c.next=35;break;case 31:return c.prev=31,c.t0=c.catch(1),c.next=35,Object(ve.d)(en({error:c.t0}));case 35:case"end":return c.stop()}}),Te,null,[[1,31]])}function Ie(){return ye.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ve.e)(nn,Me);case 2:case"end":return n.stop()}}),$e)}var He=Ie,Ze=ye.a.mark(_e);function _e(){return ye.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ve.a)([Object(ve.c)(He)]);case 2:case"end":return n.stop()}}),Ze)}var Ue=Object(je.a)(),Je=Object(G.a)({reducer:ge,middleware:function(n){return n().concat(Ue)},devTools:!1});Ue.run(_e);var Xe,qe=Je,Ke=Object(y.b)(Xe||(Xe=Object(O.a)(['\n  * {\n    box-sizing: border-box;\n  }\n  html {\n    line-height: 1.15;\n    -webkit-text-size-adjust: 100%;\n  }\n  body {\n    margin: 0;\n  }\n  main {\n    display: block;\n  }\n  ul {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n  h1, h2, h3, h4, h5, h6, p {\n    margin: 0;\n    font-weight: normal;\n  }\n  hr {\n    box-sizing: content-box;\n    height: 0;\n    overflow: visible;\n  }\n  pre {\n    font-family: monospace, monospace;\n    font-size: 1em;\n  }\n  a {\n    background-color: transparent;\n  }\n  a:visited {\n    color: inherit;\n  }\n  a:-webkit-any-link {\n    color: inherit;\n  }\n  abbr[title] {\n    border-bottom: none;\n    text-decoration: underline;\n    text-decoration: underline dotted;\n  }\n  b,\n  strong {\n    font-weight: bolder;\n  }\n  code,\n  kbd,\n  samp {\n    font-family: monospace, monospace;\n    font-size: 1em;\n  }\n  small {\n    font-size: 80%;\n  }\n  sub,\n  sup {\n    font-size: 75%;\n    line-height: 0;\n    position: relative;\n    vertical-align: baseline;\n  }\n  sub {\n    bottom: -0.25em;\n  }\n  sup {\n    top: -0.5em;\n  }\n  img {\n    border-style: none;\n  }\n  button,\n  input,\n  optgroup,\n  select,\n  textarea {\n    font-family: inherit;\n    font-size: 100%;\n    line-height: 1.15;\n    margin: 0;\n    border:none;\n    background-image:none;\n    background-color:transparent;\n    box-shadow: none;\n    color: inherit;\n  }\n  button,\n  input {\n    overflow: visible;\n  }\n  input {\n    outline: none;\n  }\n  button,\n  select {\n    text-transform: none;\n    outline: none;\n  }\n  button,\n  [type="button"],\n  [type="reset"],\n  [type="submit"] {\n    -webkit-appearance: button;\n    padding: 0;\n    background-color: transparent;\n    border: none;\n    cursor: pointer;\n  }\n  button::-moz-focus-inner,\n  [type="button"]::-moz-focus-inner,\n  [type="reset"]::-moz-focus-inner,\n  [type="submit"]::-moz-focus-inner {\n    border-style: none;\n    padding: 0;\n  }\n  button:-moz-focusring,\n  [type="button"]:-moz-focusring,\n  [type="reset"]:-moz-focusring,\n  [type="submit"]:-moz-focusring {\n    outline: 1px dotted ButtonText;\n  }\n  fieldset {\n    padding: 0.35em 0.75em 0.625em;\n  }\n  legend {\n    box-sizing: border-box;\n    color: inherit;\n    display: table;\n    max-width: 100%;\n    padding: 0;\n    white-space: normal;\n  }\n  progress {\n    vertical-align: baseline;\n  }\n  textarea {\n    overflow: auto;\n  }\n  [type="checkbox"],\n  [type="radio"] {\n    box-sizing: border-box;\n    padding: 0;\n  }\n  [type="number"]::-webkit-inner-spin-button,\n  [type="number"]::-webkit-outer-spin-button {\n    height: auto;\n  }\n  [type="search"] {\n    -webkit-appearance: textfield;\n    outline-offset: -2px;\n  }\n  [type="search"]::-webkit-search-decoration {\n    -webkit-appearance: none;\n  }\n  ::-webkit-file-upload-button {\n    -webkit-appearance: button;\n    font: inherit;\n  }\n  details {\n    display: block;\n  }\n  summary {\n    display: list-item;\n  }\n  template {\n    display: none;\n  }\n  [hidden] {\n    display: none;\n  }\n  .leaflet-tooltip {\n    background-color: '," !important;\n    border-color: "," !important;\n  }\n  .leaflet-tooltip-top:before {\n    border-top-color: "," !important;\n  }\n  .leaflet-tooltip-bottom:before {\n    border-bottom-color: "," !important;\n  }\n  .leaflet-tooltip-left:before {\n    border-left-color: "," !important;\n  }\n  .leaflet-tooltip-right:before {\n    border-right-color: "," !important;\n  }\n  .leaflet-popup-tip {\n    display: none;\n  }\n  .leaflet-div-icon {\n    background-color: transparent !important;\n    border: none !important;\n  }\n  .leaflet-popup-scrolled {\n    border: none !important;\n  }\n  .leaflet-bottom {\n    z-index: 401 !important;\n  }\n"])),Yt.colors.grey[700],Yt.colors.grey[700],Yt.colors.grey[700],Yt.colors.grey[700],Yt.colors.grey[700],Yt.colors.grey[700]);g.a.render(Object(E.jsx)(j.a.StrictMode,{children:Object(E.jsx)(y.a,{theme:Yt,children:Object(E.jsxs)(W.a,{store:qe,children:[Object(E.jsx)(Ke,{}),Object(E.jsx)(xe,{})]})})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.1cf43fc8.chunk.js.map