(this["webpackJsonpf2e2021-taiwan-bicycle-travel"]=this["webpackJsonpf2e2021-taiwan-bicycle-travel"]||[]).push([[0],{88:function(n,t,e){"use strict";e.r(t);var i,o,r,a,c,s,l,d,p,u,b,h,f,x=e(0),j=e.n(x),m=e(21),g=e.n(m),O=e(3),y=e(4),v=e(47),k={xs:0,sm:360,md:768,lg:1280,xl:1440},w=Object(v.a)(k),S=e(28),C=e(10),z=y.d.section(i||(i=Object(O.a)(["\n  position: relative;\n  width: 100vw;\n  background-color: ",";\n  text-align: center;\n"])),(function(n){return n.theme.colors.primary[400]})),B=y.d.div(o||(o=Object(O.a)(["\n  display: inline-flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: ",";\n  padding: 10px 20px;\n\n  ","\n"])),(function(n){return n.theme.layout.headerHeight.default}),w("md")(r||(r=Object(O.a)(["\n    padding: 20px 72px;\n    height: ",";\n  "])),(function(n){return n.theme.layout.headerHeight.md}))),N=y.d.img(a||(a=Object(O.a)(["\n  width: 105px;\n\n  ","\n"])),w("md")(c||(c=Object(O.a)(["\n    width: 210px;\n  "])))),A=y.d.button(s||(s=Object(O.a)(["\n  color: ",";\n  cursor: pointer;\n"])),(function(n){return n.theme.colors.grey[100]})),P=y.d.nav(l||(l=Object(O.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  padding: 8px 0;\n  color: ",";\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 403;\n\n  ","\n\n  & a {\n    text-decoration: none;\n    flex: 1 0 auto;\n\n    &:nth-child(1n+2) {\n      border-left: 1px solid ",";\n\n      ","\n    }\n  }\n\n"])),(function(n){return n.theme.colors.primary[100]}),(function(n){return n.theme.colors.primary[400]}),w("md")(d||(d=Object(O.a)(["\n    position: static;\n    width: auto;\n    background-color: transparent;\n  "]))),(function(n){return n.theme.colors.primary[400]}),w("md")(p||(p=Object(O.a)(["\n        border-left: none;\n      "])))),D=y.d.span(u||(u=Object(O.a)(["\n  text-align: center;\n  padding: 4px 0;\n  font-weight: 700;\n  font-size: 12px;\n  transition: background-color 0.2s linear;\n\n  ","\n\n  & i {\n    display: block;\n\n    ","\n  }\n"])),w("md")(b||(b=Object(O.a)(["\n    display: inline-block;\n    background-color: ",";\n    border-radius: 8px;\n    box-shadow: 0 0 0 ","px ",";\n    padding: 8px 16px;\n    margin-left: 16px;\n    font-size: 16px;\n\n    &:hover {\n      box-shadow: 0 0 0 3px ",";\n    }\n  "])),(function(n){return n.match?n.theme.colors.primary[100]:n.theme.colors.grey[100]}),(function(n){return n.match?"3":"1"}),(function(n){return n.theme.colors.primary[300]}),(function(n){return n.theme.colors.primary[300]})),w("md")(h||(h=Object(O.a)(["\n      display: inline-block;\n      margin-right: 4px;\n    "])))),F=e(8);!function(n){n.Bicycle="/bicycle",n.Routes="/routes",n.Scenics="/scenics"}(f||(f={}));var L=e(1),T=function(){var n=Object(F.f)();return Object(L.jsx)(P,{children:Object(L.jsx)(S.b,{to:f.Bicycle,children:Object(L.jsxs)(D,{match:n.pathname===f.Bicycle,children:[Object(L.jsx)("i",{className:"fas fa-bicycle"}),"\u627e\u55ae\u8eca"]})})})},E=e(51);var $,R,M,I,H,Z,_,U,J=function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(E.useMediaQuery)({query:"(".concat(t?"min-width":"max-width",": ").concat(k[n],"px)")})},X=function(){var n=J("md"),t=Object(x.useState)(!1),e=Object(C.a)(t,2),i=e[0],o=e[1];return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(z,{children:[Object(L.jsxs)(B,{children:[Object(L.jsx)(N,{src:"./logo.png",alt:"logo"}),n?Object(L.jsx)(T,{}):Object(L.jsx)(A,{onClick:function(){return o(!i)},children:Object(L.jsx)("i",{className:"fas fa-bars"})})]}),i&&!n&&Object(L.jsx)(T,{})]})})},q=e(95),K=e(96),Q=e(12),W=e(19),G=Object(W.b)({name:"station",initialState:{pedding:!1,data:[],error:null},reducers:{request:function(n,t){n.pedding=!0},success:function(n,t){n.pedding=!1,n.data=t.payload.data,n.error=null},failure:function(n,t){n.pedding=!1,n.error=t.payload.error}}}),V=G.actions,Y=V.request,nn=V.success,tn=V.failure,en=G.reducer,on=e(91);!function(n){n.Limited="Limited",n.Disabled="Disabled",n.Default="Default"}($||($={})),function(n){n.Bike="Bike",n.Parking="Parking"}(R||(R={})),function(n){n[n["\u505c\u6b62\u71df\u904b"]=0]="\u505c\u6b62\u71df\u904b",n[n["\u6b63\u5e38\u71df\u904b"]=1]="\u6b63\u5e38\u71df\u904b",n[n["\u66ab\u505c\u71df\u904b"]=2]="\u66ab\u505c\u71df\u904b"}(M||(M={}));var rn,an,cn,sn,ln,dn,pn,un,bn,hn,fn,xn,jn,mn,gn,On,yn,vn,kn,wn,Sn,Cn,zn,Bn,Nn,An,Pn,Dn,Fn,Ln,Tn,En,$n,Rn,Mn,In,Hn,Zn,_n,Un,Jn=Object(y.c)(I||(I=Object(O.a)(["\n  box-shadow: 4px 4px 20px 0 ","30;\n"])),(function(n){return n.theme.colors.grey[500]})),Xn=Object(y.c)(H||(H=Object(O.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n  display: -webkit-box;\n  -webkit-line-clamp: ",";\n  -webkit-box-orient: vertical;\n"])),(function(n){return n.lineLimit})),qn=Object(y.e)(Z||(Z=Object(O.a)(["\nfrom {\n  transform: rotate(0deg);\n}\n\nto {\n  transform: rotate(360deg);\n}\n"]))),Kn=Object(y.c)(_||(_=Object(O.a)(["\n  animation: "," 2s linear infinite;\n"])),qn),Qn=Object(y.c)(U||(U=Object(O.a)(["\n  color: ",";\n  background-color: ",";\n"])),(function(n){return n.status===$.Default?n.theme.colors.primary[500]:n.status===$.Limited?n.theme.colors.alert[600]:n.theme.colors.grey[400]}),(function(n){return n.status===$.Default?n.theme.colors.primary[100]:n.status===$.Limited?n.theme.colors.alert[100]:n.theme.colors.grey[200]})),Wn=y.d.section(rn||(rn=Object(O.a)(["\n  position: absolute;\n  bottom: ",";\n  left: 0;\n  width: 100vw;\n  height: 300px;\n  padding: 16px;\n  z-index: 402; // In order to biger than Map's z-index\n  background-color: ",";\n  border-radius: 8px;\n  cursor: initial;\n  /* overflow: hidden; */\n  ","\n  transition: bottom 0.3s linear;\n\n  ","\n"])),(function(n){return n.isUnfold?"0px":"-230px"}),(function(n){return n.theme.colors.grey[100]}),Jn,w("md")(an||(an=Object(O.a)(["\n    top: 36px;\n    left: 36px;\n    width: 430px;\n    height: calc(100% - 72px);\n    padding: 28px;\n  "])))),Gn=y.d.button(cn||(cn=Object(O.a)(["\n  position: absolute;\n  bottom: 100%;\n  background-color: ",";\n  width: 60px;\n  height: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  border-radius: 6px 6px 0 0;\n  z-index: 402;\n  font-size: 14px;\n\n  ","\n"])),(function(n){return n.theme.colors.grey[100]}),w("md")(sn||(sn=Object(O.a)(["\n    display: none;\n  "])))),Vn=y.d.div(ln||(ln=Object(O.a)(["\n  margin-bottom: 16px;\n  display: flex;\n  align-items: center;\n\n  ","\n"])),w("md")(dn||(dn=Object(O.a)(["\n    margin-bottom: 28px;\n  "])))),Yn=y.d.ul(pn||(pn=Object(O.a)(["\n  width: 100%;\n  height: calc(100% - 36px - 28px);\n  overflow: auto;\n  padding-right: 12px;\n"]))),nt=y.d.div(un||(un=Object(O.a)(["\n  position: relative;\n  padding: 8px 48px 8px 20px;\n  margin-left: 12px;\n  flex: 1 0 auto;\n  background-color: ",";\n  color: ",";\n  border-radius: 8px;\n  font-weight: bold;\n  font-size: 14px;\n"])),(function(n){return n.theme.colors.grey[200]}),(function(n){return n.theme.colors.grey[600]})),tt=y.d.input(bn||(bn=Object(O.a)(["\n  width: 100%;\n  height: 100%;\n"]))),et=y.d.button(hn||(hn=Object(O.a)(["\n  position: absolute;\n  right: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 20px;\n  color: ",";\n"])),(function(n){return n.theme.colors.grey[600]})),it=y.d.select(fn||(fn=Object(O.a)(["\n  width: 100px;\n  padding: 8px 12px;\n  font-size: 15px;\n  line-height: 20px;\n  color: ",";\n  border: 2px solid ",";\n  border-radius: 8px;\n"])),(function(n){return n.theme.colors.primary[600]}),(function(n){return n.theme.colors.primary[400]})),ot=[{CityName:"\u81fa\u5317\u5e02",City:"Taipei"},{CityName:"\u65b0\u5317\u5e02",City:"NewTaipei"},{CityName:"\u6843\u5712\u5e02",City:"Taoyuan"},{CityName:"\u81fa\u4e2d\u5e02",City:"Taichung"},{CityName:"\u81fa\u5357\u5e02",City:"Tainan"},{CityName:"\u9ad8\u96c4\u5e02",City:"Kaohsiung"},{CityName:"\u65b0\u7af9\u5e02",City:"Hsinchu"},{CityName:"\u82d7\u6817\u7e23",City:"MiaoliCounty"},{CityName:"\u5609\u7fa9\u5e02",City:"Chiayi"},{CityName:"\u5c4f\u6771\u7e23",City:"PingtungCounty"},{CityName:"\u91d1\u9580\u7e23",City:"KinmenCounty"}],rt={type:R.Bike},at=Object(W.b)({name:"displayType",initialState:rt,reducers:{update:function(n,t){n.type=t.payload.type}}}),ct=at.actions.update,st=at.reducer,lt=y.d.li(xn||(xn=Object(O.a)(["\n  display: block;\n  padding-bottom: 10px;\n  border-bottom: 1px solid ",";\n\n  &:nth-child(n+2) {\n    padding-top: 10px;\n\n    @media screen and (min-width: ","px) {\n      padding-top: 20px;\n    }\n  }\n\n  ","\n"])),(function(n){return n.theme.colors.grey[300]}),k.md,w("md")(jn||(jn=Object(O.a)(["\n    padding-bottom: 20px;\n  "])))),dt=y.d.h1(mn||(mn=Object(O.a)(["\n  ","\n  font-size: 22px;\n  line-height: 26px;\n  font-weight: 700;\n  color: ",";\n"])),Xn,(function(n){return n.theme.colors.primary[500]})),pt=y.d.div(gn||(gn=Object(O.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 12px;\n"]))),ut=y.d.button(On||(On=Object(O.a)(["\n  ","\n  flex: 1 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  text-align: center;\n  padding: 4px 20px;\n  border-radius: 8px;\n\n  &:nth-child(n+2) {\n    margin-left: 20px;\n  }\n\n  ","\n"])),Qn,w("md")(yn||(yn=Object(O.a)(["\n    display: block;\n    padding: 8px 0;\n  "])))),bt=y.d.span(vn||(vn=Object(O.a)(["\n  display: inline-block;\n  font-size: 15px;\n  line-height: 20px;\n  font-weight: 500;\n\n  & i {\n    margin-right: 4px;\n  }\n\n  ","\n"])),w("md")(kn||(kn=Object(O.a)(["\n    display: block;\n  "])))),ht=y.d.span(wn||(wn=Object(O.a)(["\n  display: inline-block;\n  font-size: 20px;\n  line-height: 32px;\n  font-weight: 700;\n\n  ","\n"])),w("md")(Sn||(Sn=Object(O.a)(["\n    display: block;\n    font-size: 26px;\n    margin-top: 4px;\n  "])))),ft=y.d.span(Cn||(Cn=Object(O.a)(["\n  font-size: 15px;\n  font-weight: 500;\n  line-height: 20px;\n  border-radius: 6px;\n  color: ",";\n\n  & i {\n    margin-right: 6px;\n  }\n"])),(function(n){return n.theme.colors.grey[500]})),xt=Object(y.d)(ft)(zn||(zn=Object(O.a)(["\n  padding: 6px 12px;\n  border: 1px solid ",";\n"])),(function(n){return n.theme.colors.grey[500]})),jt=function(n,t){return 1!==n?$.Disabled:t>5?$.Default:t>0?$.Limited:$.Disabled},mt=function(n){var t=n.station,e=n.badgeClick;return Object(L.jsxs)(lt,{children:[Object(L.jsx)(dt,{lineLimit:1,children:t.StationName.Zh_tw.split("_")[1]}),Object(L.jsxs)(pt,{children:[Object(L.jsxs)(ut,{"data-type":"rent",status:jt(t.ServiceStatus,t.AvailableRentBikes),onClick:function(){return e(R.Bike,t)},children:[Object(L.jsxs)(bt,{children:[Object(L.jsx)("i",{className:"fas fa-bicycle"}),"\u53ef\u79df\u501f"]}),Object(L.jsx)(ht,{children:t.AvailableRentBikes})]}),Object(L.jsxs)(ut,{"data-type":"return",status:jt(t.ServiceStatus,t.AvailableReturnBikes),onClick:function(){return e(R.Parking,t)},children:[Object(L.jsxs)(bt,{children:[Object(L.jsx)("i",{className:"fas fa-parking"}),"\u53ef\u505c\u8eca"]}),Object(L.jsx)(ht,{children:t.AvailableReturnBikes})]})]}),Object(L.jsxs)(pt,{children:[Object(L.jsx)(xt,{children:t.StationName.Zh_tw.split("_")[0]}),Object(L.jsxs)(ft,{children:[Object(L.jsx)("i",{className:"fas fa-lightbulb"}),M[t.ServiceStatus]]})]})]})},gt=function(n){var t=n.openSearchList,e=n.unfoldButtonClick,i=Object(on.a)(),o=Object(Q.b)(),r=Object(Q.c)((function(n){return n.displayType})).type,a=Object(Q.c)((function(n){return n.station})),c=a.pedding,s=a.data,l=a.error,d=Object(x.useState)(""),p=Object(C.a)(d,2),u=p[0],b=p[1],h=Object(x.useState)(ot[0].City),f=Object(C.a)(h,2),j=f[0],m=f[1],g=function(n,t){r!==n&&o(ct({type:n})),i.flyTo([t.StationPosition.PositionLat,t.StationPosition.PositionLon],18,{animate:!1})};return Object(L.jsxs)(Wn,{isUnfold:t,children:[Object(L.jsx)(Gn,{onClick:function(){return e(!t)},children:t?Object(L.jsx)("i",{className:"fas fa-angle-down"}):Object(L.jsx)("i",{className:"fas fa-angle-up"})}),Object(L.jsxs)(Vn,{children:[Object(L.jsx)(it,{onChange:function(n){return m(n.target.value)},children:ot.map((function(n){return Object(L.jsx)("option",{value:n.City,children:n.CityName},n.City)}))}),Object(L.jsxs)(nt,{children:[Object(L.jsx)(tt,{type:"text",value:u,placeholder:"\u641c\u5c0b\u7ad9\u9ede",onChange:function(n){return b(n.target.value)},onKeyPress:function(n){"Enter"===n.key&&function(n,t){o(Y({keyword:n,city:t}))}(u,j)}}),Object(L.jsx)(et,{children:Object(L.jsx)("i",{className:"fas fa-search"})})]})]}),Object(L.jsxs)(Yn,{children:[c&&Object(L.jsx)("h1",{children:"Loading"}),l&&Object(L.jsx)("h1",{children:"\u4f3a\u670d\u5668\u932f\u8aa4"}),!c&&!l&&(s.length>0?s.map((function(n){return Object(L.jsx)(mt,{station:n,badgeClick:g},n.StationID)})):Object(L.jsx)("div",{children:"\u7121\u641c\u5c0b\u7d50\u679c"}))]})]})},Ot=e(52),yt=y.d.button(Bn||(Bn=Object(O.a)(["\n  position: absolute;\n  right: 28px;\n  bottom: ",";\n  width: 40px;\n  height: 40px;\n  border-radius: 100%;\n  background-color: ",";\n  color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 402; // In order to biger than Map's z-index\n  font-size: 20px;\n  ","\n  ","\n  transition: bottom 0.3s linear;\n\n  &:hover {\n    border: 3px solid ",";\n  }\n\n  ","\n"])),(function(n){return n.openSearchList?"calc(300px + 12px)":"calc(70px + 12px)"}),(function(n){return n.active?n.theme.colors.primary[400]:n.theme.colors.grey[300]}),(function(n){return n.theme.colors.grey[100]}),Jn,(function(n){return n.locating?Kn:""}),(function(n){return n.theme.colors.primary[500]}),w("md")(Nn||(Nn=Object(O.a)(["\n    top: 36px;\n    bottom: auto;\n    right: calc(50% - 30px);\n    font-size: 30px;\n    width: 60px;\n    height: 60px;\n  "])))),vt=Object(W.b)({name:"geolocation",initialState:{position:null},reducers:{update:function(n,t){n.position=t.payload.position},reset:function(n){n.position=null}}}),kt=vt.actions,wt=kt.update,St=(kt.reset,vt.reducer),Ct=function(n){var t=n.openSearchList,e=Object(x.useState)(null),i=Object(C.a)(e,2),o=(i[0],i[1]),r=Object(x.useState)(!1),a=Object(C.a)(r,2),c=a[0],s=a[1],l=Object(Q.b)(),d=Object(Q.c)((function(n){return n.geolocation.position})),p=function(){s(!0);var n=navigator.geolocation.watchPosition((function(n){l(wt({position:[n.coords.latitude,n.coords.longitude]})),s(!1)}),(function(n){alert("Unable to retrieve your location"),s(!1)}));o(n)};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(yt,{openSearchList:t,"data-tip":!0,"data-for":"postitionButton",active:!!d,locating:c,onClick:function(){"geolocation"in navigator?d?l(Y({position:d})):p():alert("Geolocation is not supported by your browser")},children:Object(L.jsx)("i",{className:"fas fa-crosshairs"})}),Object(L.jsx)(Ot.a,{id:"postitionButton",place:"right",type:"dark",effect:"solid",children:"\u641c\u5c0b\u9644\u8fd1"})]})},zt=y.d.div(An||(An=Object(O.a)(["\n  position: absolute;\n  padding: 4px 6px;\n  top: 20px;\n  right: calc(50% - 100px);\n  width: 200px;\n  height: 36px;\n  cursor: pointer;\n  z-index: 402; // In order to biger than Map's z-index\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n  border-radius: 999px;\n\n  ","\n"])),Jn,(function(n){return n.theme.colors.grey[100]}),w("md")(Pn||(Pn=Object(O.a)(["\n    width: 280px;\n    height: 60px;\n    padding: 8px 12px;\n    top: calc(36px + 60px + 12px);\n    right: calc(50% - 140px);\n  "])))),Bt=y.d.button(Dn||(Dn=Object(O.a)(["\n  flex: 1 0 auto;\n  width: 50%;\n  height: 100%;\n  border-radius: 999px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ",";\n  background-color: ",";\n  font-size: 14px;\n\n  & i {\n    margin-right: 8px;\n  }\n\n  ","\n"])),(function(n){return n.active?n.theme.colors.grey[100]:n.theme.colors.primary[400]}),(function(n){return n.active?n.theme.colors.primary[400]:n.theme.colors.grey[100]}),w("md")(Fn||(Fn=Object(O.a)(["\n    font-size: 18px;\n  "])))),Nt=function(){var n=Object(Q.b)(),t=Object(Q.c)((function(n){return n.displayType})).type,e=function(e){t!==e&&n(ct({type:e}))};return Object(L.jsxs)(zt,{children:[Object(L.jsxs)(Bt,{active:t===R.Bike,onClick:function(){return e(R.Bike)},children:[Object(L.jsx)("i",{className:"fas fa-bicycle"}),"\u627e\u55ae\u8eca"]}),Object(L.jsxs)(Bt,{active:t===R.Parking,onClick:function(){return e(R.Parking)},children:[Object(L.jsx)("i",{className:"fas fa-parking"}),"\u627e\u8eca\u4f4d"]})]})},At=e(11),Pt=e.n(At),Dt=function(){var n=Object(x.useRef)(null),t=Object(x.useState)(!1),e=Object(C.a)(t,2),i=e[0],o=e[1],r=Object(x.useCallback)((function(){n.current?(Pt.a.DomEvent.disableClickPropagation(n.current),Pt.a.DomEvent.disableScrollPropagation(n.current)):setTimeout((function(){r()}),100)}),[]);return Object(x.useEffect)((function(){r()}),[r]),Object(L.jsxs)("div",{ref:n,children:[Object(L.jsx)(gt,{openSearchList:i,unfoldButtonClick:o}),Object(L.jsx)(Nt,{}),Object(L.jsx)(Ct,{openSearchList:i})]})},Ft=e(92),Lt=e(93),Tt=y.d.div(Ln||(Ln=Object(O.a)(["\n  color: ",";\n  padding: 4px 12px;\n  font-size: 14px;\n"])),(function(n){return n.theme.colors.grey[100]})),Et=e.p+"static/media/dribbble-unscreen.04671d5f.gif",$t=new Pt.a.icon({iconUrl:Et,iconSize:[120,90],iconAnchor:[60,45],popupAnchor:[1,-90]}),Rt=function(n){var t=n.position;return Object(L.jsx)(Ft.a,{"data-tip":!0,"data-for":"postitionMarker",icon:$t,position:t,children:Object(L.jsx)(Lt.a,{offset:[20,0],children:Object(L.jsx)(Tt,{children:"\u73fe\u5728\u4f4d\u7f6e"})})})},Mt={layout:{headerHeight:{default:"36px",md:"75px"}},typography:{h1:"45px",h2:"36px",h3:"32px",h4:"36px",h5:"22px",content:"18px",button:"15px",caption:"12px"},colors:{primary:{100:"#DFE4CE",200:"#CBD3B0",300:"#A4B375",400:"#738047",500:"#474F2C",600:"#292E19"},accent:{100:"#FAF0E5",200:"#F5DFC6",300:"#EABD8A",400:"#DE994A",500:"#C67A24",600:"#A3651E"},alert:{100:"#F7D4DD",200:"#F1B2C1",300:"#F27594",400:"#E75578",500:"#BC3253",600:"#8C3046"},grey:{100:"#FFFFFF",200:"#EEEEEE",300:"#C5C5C5",400:"#9A9A9A",500:"#767676",600:"#464646",700:"#222222"}}},It=e(35),Ht=y.d.text(Tn||(Tn=Object(O.a)(["\n  fill: ",";\n  font-size:24px;\n  font-weight: bold;\n  transform: ",";\n"])),(function(n){return n.color}),(function(n){return n.isOverTen?"translateX(-14px)":"translateX(-7px)"})),Zt=function(n){var t=n.status,e=n.quantity,i=Object(x.useMemo)((function(){return t===$.Default?Mt.colors.primary[400]:t===$.Limited?Mt.colors.alert[400]:Mt.colors.grey[400]}),[t]),o=Object(x.useMemo)((function(){return t===$.Default?Object(It.a)(.2,Mt.colors.primary[400]):t===$.Limited?Object(It.a)(.2,Mt.colors.alert[400]):Object(It.a)(.2,Mt.colors.grey[400])}),[t]);return Object(L.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 58 77",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(L.jsx)("ellipse",{cx:"29",cy:"72.5",rx:"15",ry:"4.5",fill:o}),Object(L.jsx)("path",{d:"M28.8003 0C12.9207 0 0.000293201 12.9204 0.000293201 28.782C-0.104107 51.984 27.7059 71.2224 28.8003 72C28.8003 72 57.7047 51.984 57.6003 28.8C57.6003 12.9204 44.6799 0 28.8003 0ZM28.8003 43.2C20.8443 43.2 14.4003 36.756 14.4003 28.8C14.4003 20.844 20.8443 14.4 28.8003 14.4C36.7563 14.4 43.2003 20.844 43.2003 28.8C43.2003 36.756 36.7563 43.2 28.8003 43.2Z",fill:i}),Object(L.jsx)("circle",{cx:"29",cy:"29",r:"19",fill:"#fff"}),Object(L.jsx)(Ht,{x:"50%",y:"47%",color:i,isOverTen:e>=10,children:e})]})},_t=e(53),Ut=e.n(_t),Jt=e(94),Xt=y.d.h1(En||(En=Object(O.a)(["\n  font-weight: 700;\n  font-size: 15px;\n  line-height: 1.3;\n  color: ",";\n\n  ","\n"])),(function(n){return n.theme.colors.primary[500]}),w("md")($n||($n=Object(O.a)(["\n    font-size: 18px;\n    line-height: 1.5;\n  "])))),qt=y.d.div(Rn||(Rn=Object(O.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  &:nth-child(n+2) {\n    margin-top: 8px;\n  }\n"]))),Kt=y.d.span(Mn||(Mn=Object(O.a)(["\n  color: ",";\n  font-size: 15px;\n  font-weight: 500;\n  line-height: 20px;\n\n  & i {\n    margin-right: 6px;\n  }\n"])),(function(n){return n.theme.colors.grey[500]})),Qt=y.d.div(In||(In=Object(O.a)(["\n  display: flex;\n  align-items: center;\n"]))),Wt=y.d.span(Hn||(Hn=Object(O.a)(["\n  ","\n  font-size: 15px;\n  font-weight: 700;\n  line-height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: auto;\n  height: auto;\n  padding: 1px 6px;\n  border-radius: 4px;\n\n  & i {\n    margin-right: 8px;\n  }\n\n  &:nth-child(n+2) {\n    margin-left: 12px;\n  }\n\n  ","\n"])),Qn,w("md")(Zn||(Zn=Object(O.a)(["\n    width: 70px;\n    height: 30px;\n    padding: 0 12px;\n  "])))),Gt=function(n){var t=n.station,e=J("md");return Object(L.jsxs)(Jt.a,{closeButton:!1,minWidth:e?350:270,maxHeight:e?100:75,children:[Object(L.jsxs)(qt,{children:[Object(L.jsx)(Xt,{children:t.StationName.Zh_tw.split("_")[1]}),Object(L.jsx)(Kt,{children:t.StationName.Zh_tw.split("_")[0]})]}),Object(L.jsxs)(qt,{children:[Object(L.jsxs)(Qt,{children:[Object(L.jsxs)(Wt,{status:jt(t.ServiceStatus,t.AvailableRentBikes),children:[Object(L.jsx)("i",{className:"fas fa-bicycle"}),t.AvailableRentBikes]}),Object(L.jsxs)(Wt,{status:jt(t.ServiceStatus,t.AvailableReturnBikes),children:[Object(L.jsx)("i",{className:"fas fa-parking"}),t.AvailableReturnBikes]})]}),Object(L.jsxs)(Kt,{children:[Object(L.jsx)("i",{className:"fas fa-lightbulb"}),M[t.ServiceStatus]]})]})]})},Vt=function(n,t,e){return Pt.a.divIcon({iconSize:[45,60],iconAnchor:[22.5,30],popupAnchor:e?[175,140]:[0,-25],html:Ut.a.renderToString(Object(L.jsx)(Zt,{status:n,quantity:t}))})},Yt={PositionMarker:Rt,StationMarker:function(n){var t=n.station,e=n.type,i=Object(on.a)(),o=J("md"),r=Object(x.useMemo)((function(){return 1!==t.ServiceStatus?Vt($.Disabled,0,o):Vt(jt(t.ServiceStatus,e===R.Bike?t.AvailableRentBikes:t.AvailableReturnBikes),e===R.Bike?t.AvailableRentBikes:t.AvailableReturnBikes,o)}),[t.AvailableRentBikes,t.AvailableReturnBikes,t.ServiceStatus,e,o]);return Object(L.jsx)(Ft.a,{icon:r,position:[t.StationPosition.PositionLat,t.StationPosition.PositionLon],eventHandlers:{click:function(){i.flyTo([t.StationPosition.PositionLat,t.StationPosition.PositionLon],18)}},children:Object(L.jsx)(Gt,{station:t})})}},ne=function(){var n=Object(Q.b)(),t=Object(x.useRef)(null),e=Object(x.useState)(null),i=Object(C.a)(e,2),o=i[0],r=i[1],a=Object(Q.c)((function(n){return n.station})).data,c=Object(Q.c)((function(n){return n.geolocation.position})),s=Object(Q.c)((function(n){return n.displayType})).type;return Object(x.useEffect)((function(){a.length>0&&o&&o.flyTo([a[0].StationPosition.PositionLat,a[0].StationPosition.PositionLon],18,{animate:!1})}),[a,o]),Object(x.useEffect)((function(){null===t.current&&c&&o&&(n(Y({position:c})),o.flyTo([c[0],c[1]],18,{animate:!1})),t.current=c}),[c,o,n]),Object(L.jsxs)(q.a,{style:{height:"100%",width:"100%"},center:[23.703875,120.982024],zoom:8,whenCreated:r,scrollWheelZoom:!0,zoomControl:!1,children:[Object(L.jsxs)(F.d,{children:[Object(L.jsx)(F.b,{path:"/",element:Object(L.jsx)(F.a,{to:f.Bicycle,replace:!0})}),Object(L.jsx)(F.b,{path:f.Bicycle,element:Object(L.jsx)(Dt,{})}),Object(L.jsx)(F.b,{path:f.Routes,element:Object(L.jsx)("div",{children:"Routes"})})]}),Object(L.jsx)(K.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"}),c&&Object(L.jsx)(Yt.PositionMarker,{position:c}),a.map((function(n){return Object(L.jsx)(Yt.StationMarker,{type:s,station:n},n.StationID)}))]})},te=y.d.div(_n||(_n=Object(O.a)(["\n  position: relative;\n  width: 100vw;\n  height: calc(100vh - ",");\n\n  ","\n"])),(function(n){return n.theme.layout.headerHeight.default}),w("md")(Un||(Un=Object(O.a)(["\n    height: calc(100vh - ",");\n  "])),(function(n){return n.theme.layout.headerHeight.md}))),ee=function(){return Object(L.jsxs)(S.a,{basename:"/F2E2021-taiwan-bicycle-travel",children:[Object(L.jsx)(X,{}),Object(L.jsx)(te,{children:Object(L.jsx)(ne,{})})]})},ie=e(57),oe=e(13),re=Object(oe.b)({station:en,geolocation:St,displayType:st}),ae=e(20),ce=e.n(ae),se=e(17),le=e(54),de=e.n(le),pe=e(56),ue=function(){var n=(new Date).toUTCString(),t=new pe.a("SHA-1","TEXT");t.setHMACKey("xtZ8aAkFV7CUlPr9QObyvFlEQxc","TEXT"),t.update("x-date: "+n);var e=t.getHMAC("B64");return{Authorization:'\n    hmac username="'.concat("161bd8271c0e417a9ee2eb466ec2b53f",'", algorithm="hmac-sha1", headers="x-date", signature="').concat(e,'"\n  '),"X-Date":n}},be=de.a.create({baseURL:"https://ptx.transportdata.tw/MOTC"}),he=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=n.map((function(n){return n+" ne null"})).join(" and "),i=t.map((function(n){return"(".concat(n.searchFields.map((function(t){return"contains(".concat(t,", '").concat(n.keyword,"')")})).join(" or "),")")})).join(" and ");return[e,i].filter((function(n){return n})).join(" and ")},fe=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return"nearby(".concat(n[0],",").concat(n[1],",").concat(t,")")},xe=["StationID","StationName/Zh_tw","StationPosition/PositionLon","StationPosition/PositionLat"],je=["StationName/Zh_tw","StationAddress/Zh_tw"],me=function(n){var t=n.$format,e=void 0===t?"JSON":t,i=n.$filter,o=n.city;return be.get("/v2/Bike/Station/".concat(o),{headers:ue(),params:{$format:e,$filter:i}})},ge=function(n){var t=n.$format,e=void 0===t?"JSON":t,i=n.$spatialFilter,o=n.$filter;return be.get("/v2/Bike/Station/NearBy",{headers:ue(),params:{$format:e,$spatialFilter:i,$filter:o}})},Oe=["StationID","ServiceStatus","AvailableRentBikes","AvailableReturnBikes"],ye=function(n){var t=n.$format,e=void 0===t?"JSON":t,i=n.$filter,o=n.city;return be.get("/v2/Bike/Availability/".concat(o),{headers:ue(),params:{$format:e,$filter:i}})},ve=function(n){var t=n.$format,e=void 0===t?"JSON":t,i=n.$spatialFilter;return be.get("/v2/Bike/Availability/NearBy",{headers:ue(),params:{$format:e,$spatialFilter:i}})},ke=ce.a.mark(Se),we=ce.a.mark(Ce);function Se(n){var t,e,i,o,r,a;return ce.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=n.payload,c.prev=1,!("position"in t)){c.next=11;break}return c.next=5,Object(se.b)(ge,{$filter:he(xe),$spatialFilter:fe(t.position)});case 5:return e=c.sent,c.next=8,Object(se.b)(ve,{$filter:he(Oe),$spatialFilter:fe(t.position)});case 8:i=c.sent,c.next=18;break;case 11:return o=t.keyword,r=t.city,c.next=14,Object(se.b)(me,{$filter:he(xe,[{keyword:o,searchFields:je}]),city:r});case 14:return e=c.sent,c.next=17,Object(se.b)(ye,{$filter:he(Oe),city:r});case 17:i=c.sent;case 18:return a=e.data.reduce((function(n,t){var e=i.data.findIndex((function(n){return n.StationID===t.StationID}));return e>-1&&n.push(Object.assign(t,i.data[e])),n}),[]),c.next=21,Object(se.d)(nn({data:a}));case 21:c.next=27;break;case 23:return c.prev=23,c.t0=c.catch(1),c.next=27,Object(se.d)(tn({error:c.t0}));case 27:case"end":return c.stop()}}),ke,null,[[1,23]])}function Ce(){return ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(se.e)(Y,Se);case 2:case"end":return n.stop()}}),we)}var ze=Ce,Be=ce.a.mark(Ne);function Ne(){return ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(se.a)([Object(se.c)(ze)]);case 2:case"end":return n.stop()}}),Be)}var Ae=Object(ie.a)(),Pe=Object(W.a)({reducer:re,middleware:function(n){return n().concat(Ae)},devTools:!1});Ae.run(Ne);var De,Fe=Pe,Le=Object(y.b)(De||(De=Object(O.a)(['\n  * {\n    box-sizing: border-box;\n  }\n  html {\n    line-height: 1.15;\n    -webkit-text-size-adjust: 100%;\n  }\n  body {\n    margin: 0;\n  }\n  main {\n    display: block;\n  }\n  ul {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n  h1, h2, h3, h4, h5, h6, p {\n    margin: 0;\n    font-weight: normal;\n  }\n  hr {\n    box-sizing: content-box;\n    height: 0;\n    overflow: visible;\n  }\n  pre {\n    font-family: monospace, monospace;\n    font-size: 1em;\n  }\n  a {\n    background-color: transparent;\n  }\n  a:visited {\n    color: inherit;\n  }\n  a:-webkit-any-link {\n    color: inherit;\n  }\n  abbr[title] {\n    border-bottom: none;\n    text-decoration: underline;\n    text-decoration: underline dotted;\n  }\n  b,\n  strong {\n    font-weight: bolder;\n  }\n  code,\n  kbd,\n  samp {\n    font-family: monospace, monospace;\n    font-size: 1em;\n  }\n  small {\n    font-size: 80%;\n  }\n  sub,\n  sup {\n    font-size: 75%;\n    line-height: 0;\n    position: relative;\n    vertical-align: baseline;\n  }\n  sub {\n    bottom: -0.25em;\n  }\n  sup {\n    top: -0.5em;\n  }\n  img {\n    border-style: none;\n  }\n  button,\n  input,\n  optgroup,\n  select,\n  textarea {\n    font-family: inherit;\n    font-size: 100%;\n    line-height: 1.15;\n    margin: 0;\n    border:none;\n    background-image:none;\n    background-color:transparent;\n    box-shadow: none;\n    color: inherit;\n  }\n  button,\n  input {\n    overflow: visible;\n  }\n  input {\n    outline: none;\n  }\n  button,\n  select {\n    text-transform: none;\n    outline: none;\n  }\n  button,\n  [type="button"],\n  [type="reset"],\n  [type="submit"] {\n    -webkit-appearance: button;\n    padding: 0;\n    background-color: transparent;\n    border: none;\n    cursor: pointer;\n  }\n  button::-moz-focus-inner,\n  [type="button"]::-moz-focus-inner,\n  [type="reset"]::-moz-focus-inner,\n  [type="submit"]::-moz-focus-inner {\n    border-style: none;\n    padding: 0;\n  }\n  button:-moz-focusring,\n  [type="button"]:-moz-focusring,\n  [type="reset"]:-moz-focusring,\n  [type="submit"]:-moz-focusring {\n    outline: 1px dotted ButtonText;\n  }\n  fieldset {\n    padding: 0.35em 0.75em 0.625em;\n  }\n  legend {\n    box-sizing: border-box;\n    color: inherit;\n    display: table;\n    max-width: 100%;\n    padding: 0;\n    white-space: normal;\n  }\n  progress {\n    vertical-align: baseline;\n  }\n  textarea {\n    overflow: auto;\n  }\n  [type="checkbox"],\n  [type="radio"] {\n    box-sizing: border-box;\n    padding: 0;\n  }\n  [type="number"]::-webkit-inner-spin-button,\n  [type="number"]::-webkit-outer-spin-button {\n    height: auto;\n  }\n  [type="search"] {\n    -webkit-appearance: textfield;\n    outline-offset: -2px;\n  }\n  [type="search"]::-webkit-search-decoration {\n    -webkit-appearance: none;\n  }\n  ::-webkit-file-upload-button {\n    -webkit-appearance: button;\n    font: inherit;\n  }\n  details {\n    display: block;\n  }\n  summary {\n    display: list-item;\n  }\n  template {\n    display: none;\n  }\n  [hidden] {\n    display: none;\n  }\n  .leaflet-tooltip {\n    background-color: '," !important;\n    border-color: "," !important;\n  }\n  .leaflet-tooltip-top:before {\n    border-top-color: "," !important;\n  }\n  .leaflet-tooltip-bottom:before {\n    border-bottom-color: "," !important;\n  }\n  .leaflet-tooltip-left:before {\n    border-left-color: "," !important;\n  }\n  .leaflet-tooltip-right:before {\n    border-right-color: "," !important;\n  }\n  .leaflet-popup-tip {\n    display: none;\n  }\n  .leaflet-div-icon {\n    background-color: transparent !important;\n    border: none !important;\n  }\n  .leaflet-popup-scrolled {\n    border: none !important;\n  }\n  .leaflet-bottom {\n    z-index: 401 !important;\n  }\n"])),Mt.colors.grey[700],Mt.colors.grey[700],Mt.colors.grey[700],Mt.colors.grey[700],Mt.colors.grey[700],Mt.colors.grey[700]);g.a.render(Object(L.jsx)(j.a.StrictMode,{children:Object(L.jsx)(y.a,{theme:Mt,children:Object(L.jsxs)(Q.a,{store:Fe,children:[Object(L.jsx)(Le,{}),Object(L.jsx)(ee,{})]})})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.f79aada2.chunk.js.map